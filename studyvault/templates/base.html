<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}StudyVault{% endblock %}</title>

  <!-- Tailwind (CDN for dev) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    /* Tailwind: SF (San Francisco) system stack */
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: [
              '-apple-system','BlinkMacSystemFont',
              'SF Pro Text','SF Pro Display',
              'Segoe UI','Helvetica Neue','Helvetica','Arial',
              'Roboto','system-ui','sans-serif'
            ]
          }
        }
      }
    }
  </script>

  <style>
    html { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
  </style>
</head>
<body class="min-h-screen bg-gray-50 text-gray-900 font-sans">
  <!-- Top Nav -->
  <header class="bg-white/90 backdrop-blur border-b sticky top-0 z-50">
    <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="{% url 'home' %}" class="text-lg sm:text-xl font-semibold tracking-tight">
        StudyVault
      </a>

      <!-- Buttons: rounded, default white; hover black + white text -->
      <nav class="flex items-center gap-2">
        {% if user.is_authenticated %}
          <span class="hidden sm:inline text-sm text-gray-600 mr-1">
            Hi, <b>{{ user.username }}</b>
          </span>

          <a href="{% url 'logout' %}"
             class="inline-flex items-center rounded-md border border-gray-300
                    px-3 py-1.5 text-sm font-medium
                    bg-white text-gray-900
                    hover:bg-black hover:text-white
                    transition-colors duration-200">
            Logout
          </a>

          <a href="/admin/"
             class="inline-flex items-center rounded-md border border-gray-300
                    px-3 py-1.5 text-sm font-medium
                    bg-white text-gray-900
                    hover:bg-black hover:text-white
                    transition-colors duration-200">
            Admin
          </a>
        {% else %}
          <a href="{% url 'login' %}"
             class="inline-flex items-center rounded-md border border-gray-300
                    px-3 py-1.5 text-sm font-medium
                    bg-white text-gray-900
                    hover:bg-black hover:text-white
                    transition-colors duration-200">
            Login
          </a>

          <a href="{% url 'signup' %}"
             class="inline-flex items-center rounded-md border border-gray-300
                    px-3 py-1.5 text-sm font-medium
                    bg-white text-gray-900
                    hover:bg-black hover:text-white
                    transition-colors duration-200">
            Sign up
          </a>

          <a href="/admin/"
             class="hidden sm:inline-flex items-center rounded-md border border-gray-300
                    px-3 py-1.5 text-sm font-medium
                    bg-white text-gray-900
                    hover:bg-black hover:text-white
                    transition-colors duration-200">
            Admin
          </a>
        {% endif %}
      </nav>
    </div>
  </header>

  <!-- Flash messages -->
  {% if messages %}
    <div class="max-w-5xl mx-auto px-4 mt-4">
      {% for m in messages %}
        <div class="mb-2 rounded-lg border px-3 py-2 text-sm
                    {% if m.tags == 'success' %}bg-green-50 border-green-300 text-green-800
                    {% elif m.tags == 'error' %}bg-red-50 border-red-300 text-red-800
                    {% else %}bg-blue-50 border-blue-300 text-blue-800{% endif %}">
          {{ m }}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  <!-- Page Content -->
  <main class="max-w-5xl mx-auto px-4 py-8">
    {% block content %}{% endblock %}
  </main>

  <footer class="border-t bg-white">
    <div class="max-w-5xl mx-auto px-4 py-4 text-xs text-gray-500">
      Â© {{ now|date:"Y" }} StudyVault
    </div>
  </footer>
</body>
</html>
